---
title: Port Forwarding with Chisel
description: Chisel is a fast TCP/UDP tunnel over HTTP. Is can be used for port forwarding.
tags:
    - Network
refs:
    - https://github.com/jpillora/chisel
date: 2023-04-08
draft: false
---

## Port Forwarding

```sh
# In remote
chisel server -p <listen-port>

# In local
chisel client <listen-ip>:<listen-port> <local-port>:<target-ip>:<target-port>
```

<br />

## Reverse Tunneling

```sh
# In local
chisel server -p <local-port> --reverse

# In remote
chisel client <local-ip>:<local-port> R:<remote-target-port>:<dest-ip>:<dest-port>
# e.g. we want to access to the remote port 8000 via http://127.0.0.1:8000/
chisel client 10.0.0.1:9999 R:8000:127.0.0.1:8000
```

### Example

We want to connect the SSH server from remote.  
In such cases, we cannot connect SSH server from our local machine so use **chisel** and build reverse tunneling to connect the target SSH.  
First execute **chisel** command in each machine.
 
```sh
# In local
chisel server -p 9999 --reverse

# In remote (assume we want to connect ssh://172.17.0.1:22)
chisel client <local-ip>:9999 R:2222:172.17.0.1:22
```

After that, we can connect the target host and port via localhost.  
Run the following command in local machine.

```bash
ssh user@localhost -p 2222
```

<br />

## SOCKS Proxy

### Forwarding SOCKS Proxy

```sh
# In remote
chisel server -p <listen-port> --sock5

# In local
chisel client <target-ip>:<listen-port> <proxy-port>:socks
```
<br />

### Reverse SOCKS Proxy

```sh
# In local
chisel server -p <listen-port> --reverse

# In remote
chisel client <attack-ip>:<listen-port> R:socks
```
